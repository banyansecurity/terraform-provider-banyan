---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "banyan_policy_tunnel Resource - terraform-provider-banyan"
subcategory: ""
description: |-
  The tunnel policy resource is used to manage the lifecycle of policies which will be attached to services of the type banyan_service_tunnel. For more information on Banyan policies, see the documentation. https://docs.banyanops.com/docs/feature-guides/administer-security-policies/policies/manage-policies/
---

# banyan_policy_tunnel (Resource)

The tunnel policy resource is used to manage the lifecycle of policies which will be attached to services of the type `banyan_service_tunnel`. For more information on Banyan policies, see the [documentation.](https://docs.banyanops.com/docs/feature-guides/administer-security-policies/policies/manage-policies/)

## Example Usage

```terraform
resource "banyan_policy_tunnel" "example" {
  name        = "corporate-network-users"
  description = "some tunnel policy description"
  access {
    roles       = ["Everyone"]
    trust_level = "High"
  }
}

## Example Usage with Layer 4 Access Policy

resource "banyan_policy_tunnel" "example" {
  name        = "corporate-network-users"
  description = "some tunnel policy description"
  access {
    roles       = ["Everyone"]
    trust_level = "High"
    l4_access {
      allow {
        cidrs     = ["10.10.10.0/24"]
        protocols = ["TCP"]
        ports     = ["443"]
      }
    }
  }
  access {
    roles       = ["Corporate"]
    trust_level = "Medium"
    l4_access {
      allow {
        cidrs     = ["10.10.10.0/24"]
        protocols = ["TCP"]
        ports     = ["443"]
        fqdns = ["www.allowthisfqdn.com"]
      }
      deny {
        cidrs = ["10.1.1.0/24"]
        protocols = ["UDP","ICMP"]
        ports = ["8081","8082"]
        fqdns = ["www.denythisfqdn.com"]
      }
    }
  }
}

resource "banyan_policy_tunnel" "anyone-high" {
  name        = "corporate-network-users"
  description = "${banyan_accesstier.example.name} allow users"
  access {
    roles       = ["Everyone"]
    trust_level = "High"
    l4_access {
      allow {
        cidrs     = ["10.10.10.0/24"]
        protocols = ["TCP"]
        ports     = ["443"]
      }
    }
  }
}

resource "banyan_policy_tunnel" "example" {
  name        = "example-policy"
  description = "Example policy description"
  access {
    roles       = ["role1", "role2"]
    trust_level = "Medium"
    l4_access {
      allow {
        cidrs     = ["10.0.0.0/24"]
        protocols = ["TCP", "UDP"]
        ports     = ["8080", "443","80"]
        fqdns     = ["example.com"]
      }
      deny {
        cidrs     = ["192.168.0.0/16"]
        protocols = ["TCP"]
        ports     = ["8443"]
        fqdns     = ["example.org"]
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `access` (Block List, Min: 1) Access describes the access rights for a set of roles (see [below for nested schema](#nestedblock--access))
- `description` (String) Description of the policy
- `name` (String) Name of the policy

### Read-Only

- `id` (String) ID of the policy in Banyan

<a id="nestedblock--access"></a>
### Nested Schema for `access`

Required:

- `roles` (Set of String) Role names to include
- `trust_level` (String) The trust level of the end user device, must be one of: "High", "Medium", "Low", or ""

Optional:

- `l4_access` (Block List, Max: 1) L4 access rules (see [below for nested schema](#nestedblock--access--l4_access))

<a id="nestedblock--access--l4_access"></a>
### Nested Schema for `access.l4_access`

Optional:

- `allow` (Block List) Role names to include (see [below for nested schema](#nestedblock--access--l4_access--allow))
- `deny` (Block List) Role names to include (see [below for nested schema](#nestedblock--access--l4_access--deny))

<a id="nestedblock--access--l4_access--allow"></a>
### Nested Schema for `access.l4_access.allow`

Optional:

- `cidrs` (Set of String) Allowed CIDRs through the service tunnel
- `fqdns` (Set of String) Allowed FQDNs through the service tunnel
- `ports` (Set of String) Allowed ports through the service tunnel
- `protocols` (Set of String) Allowed protocols through the service tunnel. Set to "TCP", "UDP", "ICMP", or "ALL"


<a id="nestedblock--access--l4_access--deny"></a>
### Nested Schema for `access.l4_access.deny`

Optional:

- `cidrs` (Set of String) Denied CIDRs through the service tunnel
- `fqdns` (Set of String) Allowed FQDNs through the service tunnel
- `ports` (Set of String) Denied ports through the service tunnel
- `protocols` (Set of String) Denied protocols through the service tunnel. Set to "TCP", "UDP", "ICMP", or "ALL"
