---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "banyan_service_web Resource - terraform-provider-banyan"
subcategory: ""
description: |-
  Resource used for lifecycle management of web services. For more information on web services see the documentation https://docs.banyansecurity.io/docs/feature-guides/hosted-websites/
---

# banyan_service_web (Resource)

Resource used for lifecycle management of web services. For more information on web services see the [documentation](https://docs.banyansecurity.io/docs/feature-guides/hosted-websites/)

## Example Usage

```terraform
resource "banyan_service_web" "example-web" {
  name           = "example-web"
  access_tier    = "us-west1"
  domain         = "example-web.us-west1.mycompany.com"
  backend_domain = "example-web.internal"
  backend_port   = 8443
  policy         = banyan_policy_web.example.id
}

resource "banyan_service_web" "example-service" {
  name        = "example-service"
  access_tier    = "us-west1"
  description = "Example service description"
  domain         = "example-web.us-west1.mycompany.com"
  backend_domain = "example-web.internal"
  backend_port   = 8443
  policy         = banyan_policy_web.example.id

  port        = 443
  backend_port = 443
  backend_tls = true
  backend_tls_insecure = false

  # Optional Fields
  suppress_device_trust_verification = false
  description_link = "https://example.com"
  access_tier      = "access-tier-1"
  policy           = "policy-id-123"
  available_in_app = true
  icon             = "example-icon"
  disable_private_dns = false

  custom_http_headers = {
    "X-Auth-Token" = "abc123"
    "X-Forwarded-For" = "192.168.1.1"
  }

  dns_overrides = {
    "internal.myservice.com" = "10.23.0.1"
    "exposed.service.com" = "internal.myservice.com"
  }

  whitelist = ["backend-workload-instance1", "backend-workload-instance2"]

  custom_trust_cookie {
    same_site_policy = "lax"
    trust_cookie_path = "/path"
  }

  service_account_access {
    authorization_header = true
    query_parameter      = "token"
    custom_header        = "Authorization"
  }

  custom_tls_cert {
    key_file  = "private-key.pem"
    cert_file = "certificate.pem"
  }

  exemptions {
    legacy_paths        = ["/legacy1", "/legacy2"]
    paths               = ["/path1", "/path2"]
    origin_header       = ["https://myorigin.com:443"]
    source_cidrs        = ["192.168.0.0/24", "10.0.0.0/16"]
    mandatory_headers   = ["X-Http-Banyan", "Allow"]
    http_methods        = ["GET", "POST"]
    target_domain       = ["https://example.com:443"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `backend_domain` (String) The internal network address where this service is hosted; ex. 192.168.1.2; set to "" if using http_connect
- `domain` (String) The external-facing network address for this service; ex. website.example.com
- `name` (String) Name of the service; use lowercase alphanumeric characters or "-"

### Optional

- `access_tier` (String) Name of the access_tier which will proxy requests to your service backend
- `access_tier_group` (String) access tier group which is associated with service
- `available_in_app` (Boolean) Whether this service is available in the app for users with permission to access this service
- `backend_port` (Number) The internal port where this service is hosted. Default is 443
- `backend_tls` (Boolean) Indicates whether the connection to the backend server uses TLS
- `backend_tls_insecure` (Boolean) Indicates the connection to the backend should not validate the backend server TLS certificate
- `cluster` (String, Deprecated) (Depreciated) Sets the cluster / shield for the service
- `connector` (String) Name of the connector which will proxy requests to your service backend
- `custom_http_headers` (Map of String) Custom HTTP headers if set would be sent to backend, As an example this can be used to set authentication headers to authenticate user agent with backend server
- `custom_tls_cert` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--custom_tls_cert))
- `custom_trust_cookie` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--custom_trust_cookie))
- `description` (String) Description of the service
- `description_link` (String) Link shown to the end user of the banyan app for this service
- `disable_private_dns` (Boolean) By default, Private DNS Override will be set to true i.e disable_private_dns is false. On the device, the domain name will resolve over the service tunnel to the correct Access Tier's public IP address. If you turn off Private DNS Override i.e. disable_private_dns is set to true, you need to explicitly set a private DNS entry for the service domain name.
- `dns_overrides` (Map of String) dns_overrides is an optional section that specifies name-to-address or name-to-name mappings. Name-to-address mapping could be used instead of DNS lookup. Format is "FQDN: ip_address". Name-to-name mapping could be used to override one FQDN with the other. Format is "FQDN1: FQDN2" Example: name-to-address -> "internal.myservice.com" : "10.23.0.1"
 name-to-name    ->    "exposed.service.com" : "internal.myservice.com"
- `exemptions` (Block Set) (see [below for nested schema](#nestedblock--exemptions))
- `icon` (String) Name of the icon which will be displayed to the end user. The icon names can be found in the UI in the service config
- `letsencrypt` (Boolean) Use a Public CA-issued server certificate instead of a Private CA-issued one
- `policy` (String) Policy ID to be attached to this service
- `port` (Number) The external-facing port for this service
- `post_auth_redirect_path` (String) redirect the user to the following path after authentication
- `service_account_access` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--service_account_access))
- `suppress_device_trust_verification` (Boolean) suppress_device_trust_verification disables Device Trust Verification for a service if set to true
- `whitelist` (List of String) whitelist is an optional section that indicates the allowed names for the backend workload instance. If this field is populated, then the backend name must match at least one entry in this field list to establish connection with the backend service.The names in this list are allowed to start with the wildcard character "*" to match more than one backend name. This field is used generally with http_connect=false. For all http_connect=true cases, or where more advanced backend defining patterns are required, use allow_patterns.

### Read-Only

- `id` (String) Id of the service in Banyan

<a id="nestedblock--custom_tls_cert"></a>
### Nested Schema for `custom_tls_cert`

Optional:

- `cert_file` (String)
- `key_file` (String)


<a id="nestedblock--custom_trust_cookie"></a>
### Nested Schema for `custom_trust_cookie`

Optional:

- `same_site_policy` (String)
- `trust_cookie_path` (String)


<a id="nestedblock--exemptions"></a>
### Nested Schema for `exemptions`

Optional:

- `http_methods` (List of String)
- `legacy_paths` (List of String)
- `mandatory_headers` (List of String)
- `origin_header` (List of String)
- `paths` (List of String)
- `source_cidrs` (List of String)
- `target_domain` (List of String)


<a id="nestedblock--service_account_access"></a>
### Nested Schema for `service_account_access`

Optional:

- `authorization_header` (Boolean)
- `custom_header` (String)
- `query_parameter` (String)

## Import

Import is supported using the following syntax:

```shell
# For importing a resource we require resource Id, which can be obtained from console for the resource we are importing
# And we need to create an entry in .tf file which represents the resource which would be imported.
# for e.g adding an entry into main.tf
# main.tf:
# resource "banyan_service_web" "myexample" {
#   name = "myexample"
# }

terraform import banyan_service_web.myexample myexample.global-edge.bnn

terraform show
# update thw show output configuration into above main.tf file, then resource is managed.
# BE CAUTIOUS before terraform apply, do terraform plan and verify there are no changes to be applied.

# Terraform Version 1.5.x or Later:
# We can create Import tf files
# for e.g
# import.tf:
# import {
#  to = banyan_service_web.myexample
#  id = "myexample.global-edge.bnn"
# }
#  Then execute
terraform plan -generate-config-out=generated.tf
# Configurations are imported into generated.tf edit and verify
# BE CAUTIOUS before terraform apply, do terraform plan and verify there are no changes to be applied.
```
